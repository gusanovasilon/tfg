CRITICAL - 2026-02-14 11:11:59 --> Error: Class "App\Models\PerfilAtletaModel" not found
[Method: GET, Route: api/fichadeportiva/3]
in APPPATH/Controllers/Api/FichaDeportiva.php on line 30.
 1 SYSTEMPATH/CodeIgniter.php(933): App\Controllers\Api\FichaDeportiva->show('3')
 2 SYSTEMPATH/CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\Api\FichaDeportiva))
 3 SYSTEMPATH/CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 4 SYSTEMPATH/Boot.php(363): CodeIgniter\CodeIgniter->run()
 5 SYSTEMPATH/Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
 6 FCPATH/index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
CRITICAL - 2026-02-14 11:26:49 --> Error: Class "App\Models\PerfilAtletaModel" not found
[Method: POST, Route: api/fichadeportiva/3]
in APPPATH/Controllers/Api/FichaDeportiva.php on line 111.
 1 APPPATH/Controllers/Api/FichaDeportiva.php(102): App\Controllers\Api\FichaDeportiva->gestionarAtleta('3', '1771068409_77690f0efadac7cfebeb.png', 'uploads/atletas')
 2 SYSTEMPATH/CodeIgniter.php(933): App\Controllers\Api\FichaDeportiva->update('3')
 3 SYSTEMPATH/CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\Api\FichaDeportiva))
 4 SYSTEMPATH/CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 5 SYSTEMPATH/Boot.php(363): CodeIgniter\CodeIgniter->run()
 6 SYSTEMPATH/Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
 7 FCPATH/index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
CRITICAL - 2026-02-14 11:33:04 --> Error: Class "App\Models\PerfilAtletaModel" not found
[Method: GET, Route: api/fichadeportiva/3]
in APPPATH/Controllers/Api/FichaDeportiva.php on line 30.
 1 SYSTEMPATH/CodeIgniter.php(933): App\Controllers\Api\FichaDeportiva->show('3')
 2 SYSTEMPATH/CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\Api\FichaDeportiva))
 3 SYSTEMPATH/CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 4 SYSTEMPATH/Boot.php(363): CodeIgniter\CodeIgniter->run()
 5 SYSTEMPATH/Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
 6 FCPATH/index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
CRITICAL - 2026-02-14 11:37:48 --> Error: Class "App\Models\PerfilAtletaModel" not found
[Method: GET, Route: api/fichadeportiva/3]
in APPPATH/Controllers/Api/FichaDeportiva.php on line 30.
 1 SYSTEMPATH/CodeIgniter.php(933): App\Controllers\Api\FichaDeportiva->show('3')
 2 SYSTEMPATH/CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\Api\FichaDeportiva))
 3 SYSTEMPATH/CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 4 SYSTEMPATH/Boot.php(363): CodeIgniter\CodeIgniter->run()
 5 SYSTEMPATH/Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
 6 FCPATH/index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
CRITICAL - 2026-02-14 11:38:47 --> Error: Class "App\Models\PerfilAtletaModel" not found
[Method: GET, Route: api/fichadeportiva/3]
in APPPATH/Controllers/Api/FichaDeportiva.php on line 30.
 1 SYSTEMPATH/CodeIgniter.php(933): App\Controllers\Api\FichaDeportiva->show('3')
 2 SYSTEMPATH/CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\Api\FichaDeportiva))
 3 SYSTEMPATH/CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 4 SYSTEMPATH/Boot.php(363): CodeIgniter\CodeIgniter->run()
 5 SYSTEMPATH/Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
 6 FCPATH/index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
CRITICAL - 2026-02-14 11:41:16 --> Error: Class "App\Models\PerfilAtletaModel" not found
[Method: GET, Route: api/fichadeportiva/3]
in APPPATH/Controllers/Api/FichaDeportiva.php on line 30.
 1 SYSTEMPATH/CodeIgniter.php(933): App\Controllers\Api\FichaDeportiva->show('3')
 2 SYSTEMPATH/CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\Api\FichaDeportiva))
 3 SYSTEMPATH/CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 4 SYSTEMPATH/Boot.php(363): CodeIgniter\CodeIgniter->run()
 5 SYSTEMPATH/Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
 6 FCPATH/index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
CRITICAL - 2026-02-14 11:41:52 --> Error: Class "App\Models\PerfilAtletaModel" not found
[Method: POST, Route: api/fichadeportiva/3]
in APPPATH/Controllers/Api/FichaDeportiva.php on line 111.
 1 APPPATH/Controllers/Api/FichaDeportiva.php(102): App\Controllers\Api\FichaDeportiva->gestionarAtleta('3', null, 'uploads/atletas')
 2 SYSTEMPATH/CodeIgniter.php(933): App\Controllers\Api\FichaDeportiva->update('3')
 3 SYSTEMPATH/CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\Api\FichaDeportiva))
 4 SYSTEMPATH/CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 5 SYSTEMPATH/Boot.php(363): CodeIgniter\CodeIgniter->run()
 6 SYSTEMPATH/Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
 7 FCPATH/index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
ERROR - 2026-02-14 18:26:29 --> mysqli_sql_exception: Cannot add or update a child row: a foreign key constraint fails (`club_lucha_db`.`mensajes`, CONSTRAINT `mensajes_ibfk_2` FOREIGN KEY (`destinatario_id`) REFERENCES `usuarios` (`id`) ON DELETE CASCADE) in /var/www/html/tfg/club_lucha_api/system/Database/MySQLi/Connection.php:327
Stack trace:
#0 /var/www/html/tfg/club_lucha_api/system/Database/MySQLi/Connection.php(327): mysqli->query('INSERT INTO `me...', 0)
#1 /var/www/html/tfg/club_lucha_api/system/Database/BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute('INSERT INTO `me...')
#2 /var/www/html/tfg/club_lucha_api/system/Database/BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery('INSERT INTO `me...')
#3 /var/www/html/tfg/club_lucha_api/system/Database/BaseBuilder.php(2345): CodeIgniter\Database\BaseConnection->query('INSERT INTO `me...', Array, false)
#4 /var/www/html/tfg/club_lucha_api/system/Model.php(394): CodeIgniter\Database\BaseBuilder->insert()
#5 /var/www/html/tfg/club_lucha_api/system/BaseModel.php(838): CodeIgniter\Model->doInsert(Array)
#6 /var/www/html/tfg/club_lucha_api/system/Model.php(797): CodeIgniter\BaseModel->insert(Array, true)
#7 /var/www/html/tfg/club_lucha_api/app/Controllers/Api/Mensajes.php(63): CodeIgniter\Model->insert(Array)
#8 /var/www/html/tfg/club_lucha_api/system/CodeIgniter.php(933): App\Controllers\Api\Mensajes->create()
#9 /var/www/html/tfg/club_lucha_api/system/CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\Api\Mensajes))
#10 /var/www/html/tfg/club_lucha_api/system/CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(NULL, Object(Config\Cache), false)
#11 /var/www/html/tfg/club_lucha_api/system/Boot.php(363): CodeIgniter\CodeIgniter->run()
#12 /var/www/html/tfg/club_lucha_api/system/Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
#13 /var/www/html/tfg/club_lucha_api/public/index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
#14 {main}
CRITICAL - 2026-02-14 18:26:29 --> CodeIgniter\Database\Exceptions\DatabaseException: Cannot add or update a child row: a foreign key constraint fails (`club_lucha_db`.`mensajes`, CONSTRAINT `mensajes_ibfk_2` FOREIGN KEY (`destinatario_id`) REFERENCES `usuarios` (`id`) ON DELETE CASCADE)
[Method: POST, Route: api/mensajes]
in SYSTEMPATH/Database/BaseConnection.php on line 684.
 1 SYSTEMPATH/Database/BaseBuilder.php(2345): CodeIgniter\Database\BaseConnection->query('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (:remitente_id:, :destinatario_id:, :asunto:, :cuerpo:, :tipo:, :leido:)', [...], false)
 2 SYSTEMPATH/Model.php(394): CodeIgniter\Database\BaseBuilder->insert()
 3 SYSTEMPATH/BaseModel.php(838): CodeIgniter\Model->doInsert([...])
 4 SYSTEMPATH/Model.php(797): CodeIgniter\BaseModel->insert([...], true)
 5 APPPATH/Controllers/Api/Mensajes.php(63): CodeIgniter\Model->insert([...])
 6 SYSTEMPATH/CodeIgniter.php(933): App\Controllers\Api\Mensajes->create()
 7 SYSTEMPATH/CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\Api\Mensajes))
 8 SYSTEMPATH/CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 9 SYSTEMPATH/Boot.php(363): CodeIgniter\CodeIgniter->run()
10 SYSTEMPATH/Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
11 FCPATH/index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
CRITICAL - 2026-02-14 18:26:29 --> [Caused by] CodeIgniter\Database\Exceptions\DatabaseException: Cannot add or update a child row: a foreign key constraint fails (`club_lucha_db`.`mensajes`, CONSTRAINT `mensajes_ibfk_2` FOREIGN KEY (`destinatario_id`) REFERENCES `usuarios` (`id`) ON DELETE CASCADE)
in SYSTEMPATH/Database/MySQLi/Connection.php on line 332.
 1 SYSTEMPATH/Database/BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (\'1\', 0, \'Cambiamos el horario\', \'Vamos a cambiar el horario a todos los sinverguenzas\', \'anuncio\', 0)')
 2 SYSTEMPATH/Database/BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (\'1\', 0, \'Cambiamos el horario\', \'Vamos a cambiar el horario a todos los sinverguenzas\', \'anuncio\', 0)')
 3 SYSTEMPATH/Database/BaseBuilder.php(2345): CodeIgniter\Database\BaseConnection->query('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (:remitente_id:, :destinatario_id:, :asunto:, :cuerpo:, :tipo:, :leido:)', [...], false)
 4 SYSTEMPATH/Model.php(394): CodeIgniter\Database\BaseBuilder->insert()
 5 SYSTEMPATH/BaseModel.php(838): CodeIgniter\Model->doInsert([...])
 6 SYSTEMPATH/Model.php(797): CodeIgniter\BaseModel->insert([...], true)
 7 APPPATH/Controllers/Api/Mensajes.php(63): CodeIgniter\Model->insert([...])
 8 SYSTEMPATH/CodeIgniter.php(933): App\Controllers\Api\Mensajes->create()
 9 SYSTEMPATH/CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\Api\Mensajes))
10 SYSTEMPATH/CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
11 SYSTEMPATH/Boot.php(363): CodeIgniter\CodeIgniter->run()
12 SYSTEMPATH/Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
13 FCPATH/index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
CRITICAL - 2026-02-14 18:26:29 --> [Caused by] mysqli_sql_exception: Cannot add or update a child row: a foreign key constraint fails (`club_lucha_db`.`mensajes`, CONSTRAINT `mensajes_ibfk_2` FOREIGN KEY (`destinatario_id`) REFERENCES `usuarios` (`id`) ON DELETE CASCADE)
in SYSTEMPATH/Database/MySQLi/Connection.php on line 327.
 1 SYSTEMPATH/Database/MySQLi/Connection.php(327): mysqli->query('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (\'1\', 0, \'Cambiamos el horario\', \'Vamos a cambiar el horario a todos los sinverguenzas\', \'anuncio\', 0)', 0)
 2 SYSTEMPATH/Database/BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (\'1\', 0, \'Cambiamos el horario\', \'Vamos a cambiar el horario a todos los sinverguenzas\', \'anuncio\', 0)')
 3 SYSTEMPATH/Database/BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (\'1\', 0, \'Cambiamos el horario\', \'Vamos a cambiar el horario a todos los sinverguenzas\', \'anuncio\', 0)')
 4 SYSTEMPATH/Database/BaseBuilder.php(2345): CodeIgniter\Database\BaseConnection->query('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (:remitente_id:, :destinatario_id:, :asunto:, :cuerpo:, :tipo:, :leido:)', [...], false)
 5 SYSTEMPATH/Model.php(394): CodeIgniter\Database\BaseBuilder->insert()
 6 SYSTEMPATH/BaseModel.php(838): CodeIgniter\Model->doInsert([...])
 7 SYSTEMPATH/Model.php(797): CodeIgniter\BaseModel->insert([...], true)
 8 APPPATH/Controllers/Api/Mensajes.php(63): CodeIgniter\Model->insert([...])
 9 SYSTEMPATH/CodeIgniter.php(933): App\Controllers\Api\Mensajes->create()
10 SYSTEMPATH/CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\Api\Mensajes))
11 SYSTEMPATH/CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
12 SYSTEMPATH/Boot.php(363): CodeIgniter\CodeIgniter->run()
13 SYSTEMPATH/Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
14 FCPATH/index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
ERROR - 2026-02-14 18:32:42 --> mysqli_sql_exception: Cannot add or update a child row: a foreign key constraint fails (`club_lucha_db`.`mensajes`, CONSTRAINT `mensajes_ibfk_2` FOREIGN KEY (`destinatario_id`) REFERENCES `usuarios` (`id`) ON DELETE CASCADE) in /var/www/html/tfg/club_lucha_api/system/Database/MySQLi/Connection.php:327
Stack trace:
#0 /var/www/html/tfg/club_lucha_api/system/Database/MySQLi/Connection.php(327): mysqli->query('INSERT INTO `me...', 0)
#1 /var/www/html/tfg/club_lucha_api/system/Database/BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute('INSERT INTO `me...')
#2 /var/www/html/tfg/club_lucha_api/system/Database/BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery('INSERT INTO `me...')
#3 /var/www/html/tfg/club_lucha_api/system/Database/BaseBuilder.php(2345): CodeIgniter\Database\BaseConnection->query('INSERT INTO `me...', Array, false)
#4 /var/www/html/tfg/club_lucha_api/system/Model.php(394): CodeIgniter\Database\BaseBuilder->insert()
#5 /var/www/html/tfg/club_lucha_api/system/BaseModel.php(838): CodeIgniter\Model->doInsert(Array)
#6 /var/www/html/tfg/club_lucha_api/system/Model.php(797): CodeIgniter\BaseModel->insert(Array, true)
#7 /var/www/html/tfg/club_lucha_api/app/Controllers/Api/Mensajes.php(63): CodeIgniter\Model->insert(Array)
#8 /var/www/html/tfg/club_lucha_api/system/CodeIgniter.php(933): App\Controllers\Api\Mensajes->create()
#9 /var/www/html/tfg/club_lucha_api/system/CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\Api\Mensajes))
#10 /var/www/html/tfg/club_lucha_api/system/CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(NULL, Object(Config\Cache), false)
#11 /var/www/html/tfg/club_lucha_api/system/Boot.php(363): CodeIgniter\CodeIgniter->run()
#12 /var/www/html/tfg/club_lucha_api/system/Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
#13 /var/www/html/tfg/club_lucha_api/public/index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
#14 {main}
CRITICAL - 2026-02-14 18:32:42 --> CodeIgniter\Database\Exceptions\DatabaseException: Cannot add or update a child row: a foreign key constraint fails (`club_lucha_db`.`mensajes`, CONSTRAINT `mensajes_ibfk_2` FOREIGN KEY (`destinatario_id`) REFERENCES `usuarios` (`id`) ON DELETE CASCADE)
[Method: POST, Route: api/mensajes]
in SYSTEMPATH/Database/BaseConnection.php on line 684.
 1 SYSTEMPATH/Database/BaseBuilder.php(2345): CodeIgniter\Database\BaseConnection->query('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (:remitente_id:, :destinatario_id:, :asunto:, :cuerpo:, :tipo:, :leido:)', [...], false)
 2 SYSTEMPATH/Model.php(394): CodeIgniter\Database\BaseBuilder->insert()
 3 SYSTEMPATH/BaseModel.php(838): CodeIgniter\Model->doInsert([...])
 4 SYSTEMPATH/Model.php(797): CodeIgniter\BaseModel->insert([...], true)
 5 APPPATH/Controllers/Api/Mensajes.php(63): CodeIgniter\Model->insert([...])
 6 SYSTEMPATH/CodeIgniter.php(933): App\Controllers\Api\Mensajes->create()
 7 SYSTEMPATH/CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\Api\Mensajes))
 8 SYSTEMPATH/CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 9 SYSTEMPATH/Boot.php(363): CodeIgniter\CodeIgniter->run()
10 SYSTEMPATH/Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
11 FCPATH/index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
CRITICAL - 2026-02-14 18:32:42 --> [Caused by] CodeIgniter\Database\Exceptions\DatabaseException: Cannot add or update a child row: a foreign key constraint fails (`club_lucha_db`.`mensajes`, CONSTRAINT `mensajes_ibfk_2` FOREIGN KEY (`destinatario_id`) REFERENCES `usuarios` (`id`) ON DELETE CASCADE)
in SYSTEMPATH/Database/MySQLi/Connection.php on line 332.
 1 SYSTEMPATH/Database/BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (\'1\', 0, \'Cambiamos el horario\', \'Vamos a cambiar el horario a todos los sinverguenzas\', \'anuncio\', 0)')
 2 SYSTEMPATH/Database/BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (\'1\', 0, \'Cambiamos el horario\', \'Vamos a cambiar el horario a todos los sinverguenzas\', \'anuncio\', 0)')
 3 SYSTEMPATH/Database/BaseBuilder.php(2345): CodeIgniter\Database\BaseConnection->query('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (:remitente_id:, :destinatario_id:, :asunto:, :cuerpo:, :tipo:, :leido:)', [...], false)
 4 SYSTEMPATH/Model.php(394): CodeIgniter\Database\BaseBuilder->insert()
 5 SYSTEMPATH/BaseModel.php(838): CodeIgniter\Model->doInsert([...])
 6 SYSTEMPATH/Model.php(797): CodeIgniter\BaseModel->insert([...], true)
 7 APPPATH/Controllers/Api/Mensajes.php(63): CodeIgniter\Model->insert([...])
 8 SYSTEMPATH/CodeIgniter.php(933): App\Controllers\Api\Mensajes->create()
 9 SYSTEMPATH/CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\Api\Mensajes))
10 SYSTEMPATH/CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
11 SYSTEMPATH/Boot.php(363): CodeIgniter\CodeIgniter->run()
12 SYSTEMPATH/Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
13 FCPATH/index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
CRITICAL - 2026-02-14 18:32:42 --> [Caused by] mysqli_sql_exception: Cannot add or update a child row: a foreign key constraint fails (`club_lucha_db`.`mensajes`, CONSTRAINT `mensajes_ibfk_2` FOREIGN KEY (`destinatario_id`) REFERENCES `usuarios` (`id`) ON DELETE CASCADE)
in SYSTEMPATH/Database/MySQLi/Connection.php on line 327.
 1 SYSTEMPATH/Database/MySQLi/Connection.php(327): mysqli->query('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (\'1\', 0, \'Cambiamos el horario\', \'Vamos a cambiar el horario a todos los sinverguenzas\', \'anuncio\', 0)', 0)
 2 SYSTEMPATH/Database/BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (\'1\', 0, \'Cambiamos el horario\', \'Vamos a cambiar el horario a todos los sinverguenzas\', \'anuncio\', 0)')
 3 SYSTEMPATH/Database/BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (\'1\', 0, \'Cambiamos el horario\', \'Vamos a cambiar el horario a todos los sinverguenzas\', \'anuncio\', 0)')
 4 SYSTEMPATH/Database/BaseBuilder.php(2345): CodeIgniter\Database\BaseConnection->query('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (:remitente_id:, :destinatario_id:, :asunto:, :cuerpo:, :tipo:, :leido:)', [...], false)
 5 SYSTEMPATH/Model.php(394): CodeIgniter\Database\BaseBuilder->insert()
 6 SYSTEMPATH/BaseModel.php(838): CodeIgniter\Model->doInsert([...])
 7 SYSTEMPATH/Model.php(797): CodeIgniter\BaseModel->insert([...], true)
 8 APPPATH/Controllers/Api/Mensajes.php(63): CodeIgniter\Model->insert([...])
 9 SYSTEMPATH/CodeIgniter.php(933): App\Controllers\Api\Mensajes->create()
10 SYSTEMPATH/CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\Api\Mensajes))
11 SYSTEMPATH/CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
12 SYSTEMPATH/Boot.php(363): CodeIgniter\CodeIgniter->run()
13 SYSTEMPATH/Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
14 FCPATH/index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
ERROR - 2026-02-14 18:32:45 --> mysqli_sql_exception: Cannot add or update a child row: a foreign key constraint fails (`club_lucha_db`.`mensajes`, CONSTRAINT `mensajes_ibfk_2` FOREIGN KEY (`destinatario_id`) REFERENCES `usuarios` (`id`) ON DELETE CASCADE) in /var/www/html/tfg/club_lucha_api/system/Database/MySQLi/Connection.php:327
Stack trace:
#0 /var/www/html/tfg/club_lucha_api/system/Database/MySQLi/Connection.php(327): mysqli->query('INSERT INTO `me...', 0)
#1 /var/www/html/tfg/club_lucha_api/system/Database/BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute('INSERT INTO `me...')
#2 /var/www/html/tfg/club_lucha_api/system/Database/BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery('INSERT INTO `me...')
#3 /var/www/html/tfg/club_lucha_api/system/Database/BaseBuilder.php(2345): CodeIgniter\Database\BaseConnection->query('INSERT INTO `me...', Array, false)
#4 /var/www/html/tfg/club_lucha_api/system/Model.php(394): CodeIgniter\Database\BaseBuilder->insert()
#5 /var/www/html/tfg/club_lucha_api/system/BaseModel.php(838): CodeIgniter\Model->doInsert(Array)
#6 /var/www/html/tfg/club_lucha_api/system/Model.php(797): CodeIgniter\BaseModel->insert(Array, true)
#7 /var/www/html/tfg/club_lucha_api/app/Controllers/Api/Mensajes.php(63): CodeIgniter\Model->insert(Array)
#8 /var/www/html/tfg/club_lucha_api/system/CodeIgniter.php(933): App\Controllers\Api\Mensajes->create()
#9 /var/www/html/tfg/club_lucha_api/system/CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\Api\Mensajes))
#10 /var/www/html/tfg/club_lucha_api/system/CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(NULL, Object(Config\Cache), false)
#11 /var/www/html/tfg/club_lucha_api/system/Boot.php(363): CodeIgniter\CodeIgniter->run()
#12 /var/www/html/tfg/club_lucha_api/system/Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
#13 /var/www/html/tfg/club_lucha_api/public/index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
#14 {main}
CRITICAL - 2026-02-14 18:32:45 --> CodeIgniter\Database\Exceptions\DatabaseException: Cannot add or update a child row: a foreign key constraint fails (`club_lucha_db`.`mensajes`, CONSTRAINT `mensajes_ibfk_2` FOREIGN KEY (`destinatario_id`) REFERENCES `usuarios` (`id`) ON DELETE CASCADE)
[Method: POST, Route: api/mensajes]
in SYSTEMPATH/Database/BaseConnection.php on line 684.
 1 SYSTEMPATH/Database/BaseBuilder.php(2345): CodeIgniter\Database\BaseConnection->query('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (:remitente_id:, :destinatario_id:, :asunto:, :cuerpo:, :tipo:, :leido:)', [...], false)
 2 SYSTEMPATH/Model.php(394): CodeIgniter\Database\BaseBuilder->insert()
 3 SYSTEMPATH/BaseModel.php(838): CodeIgniter\Model->doInsert([...])
 4 SYSTEMPATH/Model.php(797): CodeIgniter\BaseModel->insert([...], true)
 5 APPPATH/Controllers/Api/Mensajes.php(63): CodeIgniter\Model->insert([...])
 6 SYSTEMPATH/CodeIgniter.php(933): App\Controllers\Api\Mensajes->create()
 7 SYSTEMPATH/CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\Api\Mensajes))
 8 SYSTEMPATH/CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 9 SYSTEMPATH/Boot.php(363): CodeIgniter\CodeIgniter->run()
10 SYSTEMPATH/Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
11 FCPATH/index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
CRITICAL - 2026-02-14 18:32:45 --> [Caused by] CodeIgniter\Database\Exceptions\DatabaseException: Cannot add or update a child row: a foreign key constraint fails (`club_lucha_db`.`mensajes`, CONSTRAINT `mensajes_ibfk_2` FOREIGN KEY (`destinatario_id`) REFERENCES `usuarios` (`id`) ON DELETE CASCADE)
in SYSTEMPATH/Database/MySQLi/Connection.php on line 332.
 1 SYSTEMPATH/Database/BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (\'1\', 0, \'Cambiamos el horario\', \'Vamos a cambiar el horario a todos los sinverguenzas\', \'anuncio\', 0)')
 2 SYSTEMPATH/Database/BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (\'1\', 0, \'Cambiamos el horario\', \'Vamos a cambiar el horario a todos los sinverguenzas\', \'anuncio\', 0)')
 3 SYSTEMPATH/Database/BaseBuilder.php(2345): CodeIgniter\Database\BaseConnection->query('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (:remitente_id:, :destinatario_id:, :asunto:, :cuerpo:, :tipo:, :leido:)', [...], false)
 4 SYSTEMPATH/Model.php(394): CodeIgniter\Database\BaseBuilder->insert()
 5 SYSTEMPATH/BaseModel.php(838): CodeIgniter\Model->doInsert([...])
 6 SYSTEMPATH/Model.php(797): CodeIgniter\BaseModel->insert([...], true)
 7 APPPATH/Controllers/Api/Mensajes.php(63): CodeIgniter\Model->insert([...])
 8 SYSTEMPATH/CodeIgniter.php(933): App\Controllers\Api\Mensajes->create()
 9 SYSTEMPATH/CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\Api\Mensajes))
10 SYSTEMPATH/CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
11 SYSTEMPATH/Boot.php(363): CodeIgniter\CodeIgniter->run()
12 SYSTEMPATH/Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
13 FCPATH/index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
CRITICAL - 2026-02-14 18:32:45 --> [Caused by] mysqli_sql_exception: Cannot add or update a child row: a foreign key constraint fails (`club_lucha_db`.`mensajes`, CONSTRAINT `mensajes_ibfk_2` FOREIGN KEY (`destinatario_id`) REFERENCES `usuarios` (`id`) ON DELETE CASCADE)
in SYSTEMPATH/Database/MySQLi/Connection.php on line 327.
 1 SYSTEMPATH/Database/MySQLi/Connection.php(327): mysqli->query('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (\'1\', 0, \'Cambiamos el horario\', \'Vamos a cambiar el horario a todos los sinverguenzas\', \'anuncio\', 0)', 0)
 2 SYSTEMPATH/Database/BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (\'1\', 0, \'Cambiamos el horario\', \'Vamos a cambiar el horario a todos los sinverguenzas\', \'anuncio\', 0)')
 3 SYSTEMPATH/Database/BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (\'1\', 0, \'Cambiamos el horario\', \'Vamos a cambiar el horario a todos los sinverguenzas\', \'anuncio\', 0)')
 4 SYSTEMPATH/Database/BaseBuilder.php(2345): CodeIgniter\Database\BaseConnection->query('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (:remitente_id:, :destinatario_id:, :asunto:, :cuerpo:, :tipo:, :leido:)', [...], false)
 5 SYSTEMPATH/Model.php(394): CodeIgniter\Database\BaseBuilder->insert()
 6 SYSTEMPATH/BaseModel.php(838): CodeIgniter\Model->doInsert([...])
 7 SYSTEMPATH/Model.php(797): CodeIgniter\BaseModel->insert([...], true)
 8 APPPATH/Controllers/Api/Mensajes.php(63): CodeIgniter\Model->insert([...])
 9 SYSTEMPATH/CodeIgniter.php(933): App\Controllers\Api\Mensajes->create()
10 SYSTEMPATH/CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\Api\Mensajes))
11 SYSTEMPATH/CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
12 SYSTEMPATH/Boot.php(363): CodeIgniter\CodeIgniter->run()
13 SYSTEMPATH/Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
14 FCPATH/index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
ERROR - 2026-02-14 18:33:25 --> mysqli_sql_exception: Cannot add or update a child row: a foreign key constraint fails (`club_lucha_db`.`mensajes`, CONSTRAINT `mensajes_ibfk_2` FOREIGN KEY (`destinatario_id`) REFERENCES `usuarios` (`id`) ON DELETE CASCADE) in /var/www/html/tfg/club_lucha_api/system/Database/MySQLi/Connection.php:327
Stack trace:
#0 /var/www/html/tfg/club_lucha_api/system/Database/MySQLi/Connection.php(327): mysqli->query('INSERT INTO `me...', 0)
#1 /var/www/html/tfg/club_lucha_api/system/Database/BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute('INSERT INTO `me...')
#2 /var/www/html/tfg/club_lucha_api/system/Database/BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery('INSERT INTO `me...')
#3 /var/www/html/tfg/club_lucha_api/system/Database/BaseBuilder.php(2345): CodeIgniter\Database\BaseConnection->query('INSERT INTO `me...', Array, false)
#4 /var/www/html/tfg/club_lucha_api/system/Model.php(394): CodeIgniter\Database\BaseBuilder->insert()
#5 /var/www/html/tfg/club_lucha_api/system/BaseModel.php(838): CodeIgniter\Model->doInsert(Array)
#6 /var/www/html/tfg/club_lucha_api/system/Model.php(797): CodeIgniter\BaseModel->insert(Array, true)
#7 /var/www/html/tfg/club_lucha_api/app/Controllers/Api/Mensajes.php(63): CodeIgniter\Model->insert(Array)
#8 /var/www/html/tfg/club_lucha_api/system/CodeIgniter.php(933): App\Controllers\Api\Mensajes->create()
#9 /var/www/html/tfg/club_lucha_api/system/CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\Api\Mensajes))
#10 /var/www/html/tfg/club_lucha_api/system/CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(NULL, Object(Config\Cache), false)
#11 /var/www/html/tfg/club_lucha_api/system/Boot.php(363): CodeIgniter\CodeIgniter->run()
#12 /var/www/html/tfg/club_lucha_api/system/Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
#13 /var/www/html/tfg/club_lucha_api/public/index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
#14 {main}
CRITICAL - 2026-02-14 18:33:25 --> CodeIgniter\Database\Exceptions\DatabaseException: Cannot add or update a child row: a foreign key constraint fails (`club_lucha_db`.`mensajes`, CONSTRAINT `mensajes_ibfk_2` FOREIGN KEY (`destinatario_id`) REFERENCES `usuarios` (`id`) ON DELETE CASCADE)
[Method: POST, Route: api/mensajes]
in SYSTEMPATH/Database/BaseConnection.php on line 684.
 1 SYSTEMPATH/Database/BaseBuilder.php(2345): CodeIgniter\Database\BaseConnection->query('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (:remitente_id:, :destinatario_id:, :asunto:, :cuerpo:, :tipo:, :leido:)', [...], false)
 2 SYSTEMPATH/Model.php(394): CodeIgniter\Database\BaseBuilder->insert()
 3 SYSTEMPATH/BaseModel.php(838): CodeIgniter\Model->doInsert([...])
 4 SYSTEMPATH/Model.php(797): CodeIgniter\BaseModel->insert([...], true)
 5 APPPATH/Controllers/Api/Mensajes.php(63): CodeIgniter\Model->insert([...])
 6 SYSTEMPATH/CodeIgniter.php(933): App\Controllers\Api\Mensajes->create()
 7 SYSTEMPATH/CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\Api\Mensajes))
 8 SYSTEMPATH/CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 9 SYSTEMPATH/Boot.php(363): CodeIgniter\CodeIgniter->run()
10 SYSTEMPATH/Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
11 FCPATH/index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
CRITICAL - 2026-02-14 18:33:25 --> [Caused by] CodeIgniter\Database\Exceptions\DatabaseException: Cannot add or update a child row: a foreign key constraint fails (`club_lucha_db`.`mensajes`, CONSTRAINT `mensajes_ibfk_2` FOREIGN KEY (`destinatario_id`) REFERENCES `usuarios` (`id`) ON DELETE CASCADE)
in SYSTEMPATH/Database/MySQLi/Connection.php on line 332.
 1 SYSTEMPATH/Database/BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (\'1\', 0, \'Cambiamos el horario\', \'ajsndkajsnckjwnec\', \'anuncio\', 0)')
 2 SYSTEMPATH/Database/BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (\'1\', 0, \'Cambiamos el horario\', \'ajsndkajsnckjwnec\', \'anuncio\', 0)')
 3 SYSTEMPATH/Database/BaseBuilder.php(2345): CodeIgniter\Database\BaseConnection->query('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (:remitente_id:, :destinatario_id:, :asunto:, :cuerpo:, :tipo:, :leido:)', [...], false)
 4 SYSTEMPATH/Model.php(394): CodeIgniter\Database\BaseBuilder->insert()
 5 SYSTEMPATH/BaseModel.php(838): CodeIgniter\Model->doInsert([...])
 6 SYSTEMPATH/Model.php(797): CodeIgniter\BaseModel->insert([...], true)
 7 APPPATH/Controllers/Api/Mensajes.php(63): CodeIgniter\Model->insert([...])
 8 SYSTEMPATH/CodeIgniter.php(933): App\Controllers\Api\Mensajes->create()
 9 SYSTEMPATH/CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\Api\Mensajes))
10 SYSTEMPATH/CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
11 SYSTEMPATH/Boot.php(363): CodeIgniter\CodeIgniter->run()
12 SYSTEMPATH/Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
13 FCPATH/index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
CRITICAL - 2026-02-14 18:33:25 --> [Caused by] mysqli_sql_exception: Cannot add or update a child row: a foreign key constraint fails (`club_lucha_db`.`mensajes`, CONSTRAINT `mensajes_ibfk_2` FOREIGN KEY (`destinatario_id`) REFERENCES `usuarios` (`id`) ON DELETE CASCADE)
in SYSTEMPATH/Database/MySQLi/Connection.php on line 327.
 1 SYSTEMPATH/Database/MySQLi/Connection.php(327): mysqli->query('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (\'1\', 0, \'Cambiamos el horario\', \'ajsndkajsnckjwnec\', \'anuncio\', 0)', 0)
 2 SYSTEMPATH/Database/BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (\'1\', 0, \'Cambiamos el horario\', \'ajsndkajsnckjwnec\', \'anuncio\', 0)')
 3 SYSTEMPATH/Database/BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (\'1\', 0, \'Cambiamos el horario\', \'ajsndkajsnckjwnec\', \'anuncio\', 0)')
 4 SYSTEMPATH/Database/BaseBuilder.php(2345): CodeIgniter\Database\BaseConnection->query('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (:remitente_id:, :destinatario_id:, :asunto:, :cuerpo:, :tipo:, :leido:)', [...], false)
 5 SYSTEMPATH/Model.php(394): CodeIgniter\Database\BaseBuilder->insert()
 6 SYSTEMPATH/BaseModel.php(838): CodeIgniter\Model->doInsert([...])
 7 SYSTEMPATH/Model.php(797): CodeIgniter\BaseModel->insert([...], true)
 8 APPPATH/Controllers/Api/Mensajes.php(63): CodeIgniter\Model->insert([...])
 9 SYSTEMPATH/CodeIgniter.php(933): App\Controllers\Api\Mensajes->create()
10 SYSTEMPATH/CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\Api\Mensajes))
11 SYSTEMPATH/CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
12 SYSTEMPATH/Boot.php(363): CodeIgniter\CodeIgniter->run()
13 SYSTEMPATH/Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
14 FCPATH/index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
ERROR - 2026-02-14 18:36:26 --> mysqli_sql_exception: Cannot add or update a child row: a foreign key constraint fails (`club_lucha_db`.`mensajes`, CONSTRAINT `mensajes_ibfk_2` FOREIGN KEY (`destinatario_id`) REFERENCES `usuarios` (`id`) ON DELETE CASCADE) in /var/www/html/tfg/club_lucha_api/system/Database/MySQLi/Connection.php:327
Stack trace:
#0 /var/www/html/tfg/club_lucha_api/system/Database/MySQLi/Connection.php(327): mysqli->query('INSERT INTO `me...', 0)
#1 /var/www/html/tfg/club_lucha_api/system/Database/BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute('INSERT INTO `me...')
#2 /var/www/html/tfg/club_lucha_api/system/Database/BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery('INSERT INTO `me...')
#3 /var/www/html/tfg/club_lucha_api/system/Database/BaseBuilder.php(2345): CodeIgniter\Database\BaseConnection->query('INSERT INTO `me...', Array, false)
#4 /var/www/html/tfg/club_lucha_api/system/Model.php(394): CodeIgniter\Database\BaseBuilder->insert()
#5 /var/www/html/tfg/club_lucha_api/system/BaseModel.php(838): CodeIgniter\Model->doInsert(Array)
#6 /var/www/html/tfg/club_lucha_api/system/Model.php(797): CodeIgniter\BaseModel->insert(Array, true)
#7 /var/www/html/tfg/club_lucha_api/app/Controllers/Api/Mensajes.php(63): CodeIgniter\Model->insert(Array)
#8 /var/www/html/tfg/club_lucha_api/system/CodeIgniter.php(933): App\Controllers\Api\Mensajes->create()
#9 /var/www/html/tfg/club_lucha_api/system/CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\Api\Mensajes))
#10 /var/www/html/tfg/club_lucha_api/system/CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(NULL, Object(Config\Cache), false)
#11 /var/www/html/tfg/club_lucha_api/system/Boot.php(363): CodeIgniter\CodeIgniter->run()
#12 /var/www/html/tfg/club_lucha_api/system/Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
#13 /var/www/html/tfg/club_lucha_api/public/index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
#14 {main}
CRITICAL - 2026-02-14 18:36:26 --> CodeIgniter\Database\Exceptions\DatabaseException: Cannot add or update a child row: a foreign key constraint fails (`club_lucha_db`.`mensajes`, CONSTRAINT `mensajes_ibfk_2` FOREIGN KEY (`destinatario_id`) REFERENCES `usuarios` (`id`) ON DELETE CASCADE)
[Method: POST, Route: api/mensajes]
in SYSTEMPATH/Database/BaseConnection.php on line 684.
 1 SYSTEMPATH/Database/BaseBuilder.php(2345): CodeIgniter\Database\BaseConnection->query('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (:remitente_id:, :destinatario_id:, :asunto:, :cuerpo:, :tipo:, :leido:)', [...], false)
 2 SYSTEMPATH/Model.php(394): CodeIgniter\Database\BaseBuilder->insert()
 3 SYSTEMPATH/BaseModel.php(838): CodeIgniter\Model->doInsert([...])
 4 SYSTEMPATH/Model.php(797): CodeIgniter\BaseModel->insert([...], true)
 5 APPPATH/Controllers/Api/Mensajes.php(63): CodeIgniter\Model->insert([...])
 6 SYSTEMPATH/CodeIgniter.php(933): App\Controllers\Api\Mensajes->create()
 7 SYSTEMPATH/CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\Api\Mensajes))
 8 SYSTEMPATH/CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 9 SYSTEMPATH/Boot.php(363): CodeIgniter\CodeIgniter->run()
10 SYSTEMPATH/Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
11 FCPATH/index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
CRITICAL - 2026-02-14 18:36:26 --> [Caused by] CodeIgniter\Database\Exceptions\DatabaseException: Cannot add or update a child row: a foreign key constraint fails (`club_lucha_db`.`mensajes`, CONSTRAINT `mensajes_ibfk_2` FOREIGN KEY (`destinatario_id`) REFERENCES `usuarios` (`id`) ON DELETE CASCADE)
in SYSTEMPATH/Database/MySQLi/Connection.php on line 332.
 1 SYSTEMPATH/Database/BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (\'1\', 0, \'asdasd\', \'asdasdasd\', \'anuncio\', 0)')
 2 SYSTEMPATH/Database/BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (\'1\', 0, \'asdasd\', \'asdasdasd\', \'anuncio\', 0)')
 3 SYSTEMPATH/Database/BaseBuilder.php(2345): CodeIgniter\Database\BaseConnection->query('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (:remitente_id:, :destinatario_id:, :asunto:, :cuerpo:, :tipo:, :leido:)', [...], false)
 4 SYSTEMPATH/Model.php(394): CodeIgniter\Database\BaseBuilder->insert()
 5 SYSTEMPATH/BaseModel.php(838): CodeIgniter\Model->doInsert([...])
 6 SYSTEMPATH/Model.php(797): CodeIgniter\BaseModel->insert([...], true)
 7 APPPATH/Controllers/Api/Mensajes.php(63): CodeIgniter\Model->insert([...])
 8 SYSTEMPATH/CodeIgniter.php(933): App\Controllers\Api\Mensajes->create()
 9 SYSTEMPATH/CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\Api\Mensajes))
10 SYSTEMPATH/CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
11 SYSTEMPATH/Boot.php(363): CodeIgniter\CodeIgniter->run()
12 SYSTEMPATH/Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
13 FCPATH/index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
CRITICAL - 2026-02-14 18:36:26 --> [Caused by] mysqli_sql_exception: Cannot add or update a child row: a foreign key constraint fails (`club_lucha_db`.`mensajes`, CONSTRAINT `mensajes_ibfk_2` FOREIGN KEY (`destinatario_id`) REFERENCES `usuarios` (`id`) ON DELETE CASCADE)
in SYSTEMPATH/Database/MySQLi/Connection.php on line 327.
 1 SYSTEMPATH/Database/MySQLi/Connection.php(327): mysqli->query('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (\'1\', 0, \'asdasd\', \'asdasdasd\', \'anuncio\', 0)', 0)
 2 SYSTEMPATH/Database/BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (\'1\', 0, \'asdasd\', \'asdasdasd\', \'anuncio\', 0)')
 3 SYSTEMPATH/Database/BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (\'1\', 0, \'asdasd\', \'asdasdasd\', \'anuncio\', 0)')
 4 SYSTEMPATH/Database/BaseBuilder.php(2345): CodeIgniter\Database\BaseConnection->query('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (:remitente_id:, :destinatario_id:, :asunto:, :cuerpo:, :tipo:, :leido:)', [...], false)
 5 SYSTEMPATH/Model.php(394): CodeIgniter\Database\BaseBuilder->insert()
 6 SYSTEMPATH/BaseModel.php(838): CodeIgniter\Model->doInsert([...])
 7 SYSTEMPATH/Model.php(797): CodeIgniter\BaseModel->insert([...], true)
 8 APPPATH/Controllers/Api/Mensajes.php(63): CodeIgniter\Model->insert([...])
 9 SYSTEMPATH/CodeIgniter.php(933): App\Controllers\Api\Mensajes->create()
10 SYSTEMPATH/CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\Api\Mensajes))
11 SYSTEMPATH/CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
12 SYSTEMPATH/Boot.php(363): CodeIgniter\CodeIgniter->run()
13 SYSTEMPATH/Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
14 FCPATH/index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
ERROR - 2026-02-14 18:36:57 --> mysqli_sql_exception: Cannot add or update a child row: a foreign key constraint fails (`club_lucha_db`.`mensajes`, CONSTRAINT `mensajes_ibfk_2` FOREIGN KEY (`destinatario_id`) REFERENCES `usuarios` (`id`) ON DELETE CASCADE) in /var/www/html/tfg/club_lucha_api/system/Database/MySQLi/Connection.php:327
Stack trace:
#0 /var/www/html/tfg/club_lucha_api/system/Database/MySQLi/Connection.php(327): mysqli->query('INSERT INTO `me...', 0)
#1 /var/www/html/tfg/club_lucha_api/system/Database/BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute('INSERT INTO `me...')
#2 /var/www/html/tfg/club_lucha_api/system/Database/BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery('INSERT INTO `me...')
#3 /var/www/html/tfg/club_lucha_api/system/Database/BaseBuilder.php(2345): CodeIgniter\Database\BaseConnection->query('INSERT INTO `me...', Array, false)
#4 /var/www/html/tfg/club_lucha_api/system/Model.php(394): CodeIgniter\Database\BaseBuilder->insert()
#5 /var/www/html/tfg/club_lucha_api/system/BaseModel.php(838): CodeIgniter\Model->doInsert(Array)
#6 /var/www/html/tfg/club_lucha_api/system/Model.php(797): CodeIgniter\BaseModel->insert(Array, true)
#7 /var/www/html/tfg/club_lucha_api/app/Controllers/Api/Mensajes.php(63): CodeIgniter\Model->insert(Array)
#8 /var/www/html/tfg/club_lucha_api/system/CodeIgniter.php(933): App\Controllers\Api\Mensajes->create()
#9 /var/www/html/tfg/club_lucha_api/system/CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\Api\Mensajes))
#10 /var/www/html/tfg/club_lucha_api/system/CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(NULL, Object(Config\Cache), false)
#11 /var/www/html/tfg/club_lucha_api/system/Boot.php(363): CodeIgniter\CodeIgniter->run()
#12 /var/www/html/tfg/club_lucha_api/system/Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
#13 /var/www/html/tfg/club_lucha_api/public/index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
#14 {main}
CRITICAL - 2026-02-14 18:36:57 --> CodeIgniter\Database\Exceptions\DatabaseException: Cannot add or update a child row: a foreign key constraint fails (`club_lucha_db`.`mensajes`, CONSTRAINT `mensajes_ibfk_2` FOREIGN KEY (`destinatario_id`) REFERENCES `usuarios` (`id`) ON DELETE CASCADE)
[Method: POST, Route: api/mensajes]
in SYSTEMPATH/Database/BaseConnection.php on line 684.
 1 SYSTEMPATH/Database/BaseBuilder.php(2345): CodeIgniter\Database\BaseConnection->query('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (:remitente_id:, :destinatario_id:, :asunto:, :cuerpo:, :tipo:, :leido:)', [...], false)
 2 SYSTEMPATH/Model.php(394): CodeIgniter\Database\BaseBuilder->insert()
 3 SYSTEMPATH/BaseModel.php(838): CodeIgniter\Model->doInsert([...])
 4 SYSTEMPATH/Model.php(797): CodeIgniter\BaseModel->insert([...], true)
 5 APPPATH/Controllers/Api/Mensajes.php(63): CodeIgniter\Model->insert([...])
 6 SYSTEMPATH/CodeIgniter.php(933): App\Controllers\Api\Mensajes->create()
 7 SYSTEMPATH/CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\Api\Mensajes))
 8 SYSTEMPATH/CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 9 SYSTEMPATH/Boot.php(363): CodeIgniter\CodeIgniter->run()
10 SYSTEMPATH/Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
11 FCPATH/index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
CRITICAL - 2026-02-14 18:36:57 --> [Caused by] CodeIgniter\Database\Exceptions\DatabaseException: Cannot add or update a child row: a foreign key constraint fails (`club_lucha_db`.`mensajes`, CONSTRAINT `mensajes_ibfk_2` FOREIGN KEY (`destinatario_id`) REFERENCES `usuarios` (`id`) ON DELETE CASCADE)
in SYSTEMPATH/Database/MySQLi/Connection.php on line 332.
 1 SYSTEMPATH/Database/BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (\'1\', 0, \'asdasdasd\', \'asdadasd\', \'anuncio\', 0)')
 2 SYSTEMPATH/Database/BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (\'1\', 0, \'asdasdasd\', \'asdadasd\', \'anuncio\', 0)')
 3 SYSTEMPATH/Database/BaseBuilder.php(2345): CodeIgniter\Database\BaseConnection->query('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (:remitente_id:, :destinatario_id:, :asunto:, :cuerpo:, :tipo:, :leido:)', [...], false)
 4 SYSTEMPATH/Model.php(394): CodeIgniter\Database\BaseBuilder->insert()
 5 SYSTEMPATH/BaseModel.php(838): CodeIgniter\Model->doInsert([...])
 6 SYSTEMPATH/Model.php(797): CodeIgniter\BaseModel->insert([...], true)
 7 APPPATH/Controllers/Api/Mensajes.php(63): CodeIgniter\Model->insert([...])
 8 SYSTEMPATH/CodeIgniter.php(933): App\Controllers\Api\Mensajes->create()
 9 SYSTEMPATH/CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\Api\Mensajes))
10 SYSTEMPATH/CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
11 SYSTEMPATH/Boot.php(363): CodeIgniter\CodeIgniter->run()
12 SYSTEMPATH/Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
13 FCPATH/index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
CRITICAL - 2026-02-14 18:36:57 --> [Caused by] mysqli_sql_exception: Cannot add or update a child row: a foreign key constraint fails (`club_lucha_db`.`mensajes`, CONSTRAINT `mensajes_ibfk_2` FOREIGN KEY (`destinatario_id`) REFERENCES `usuarios` (`id`) ON DELETE CASCADE)
in SYSTEMPATH/Database/MySQLi/Connection.php on line 327.
 1 SYSTEMPATH/Database/MySQLi/Connection.php(327): mysqli->query('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (\'1\', 0, \'asdasdasd\', \'asdadasd\', \'anuncio\', 0)', 0)
 2 SYSTEMPATH/Database/BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (\'1\', 0, \'asdasdasd\', \'asdadasd\', \'anuncio\', 0)')
 3 SYSTEMPATH/Database/BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (\'1\', 0, \'asdasdasd\', \'asdadasd\', \'anuncio\', 0)')
 4 SYSTEMPATH/Database/BaseBuilder.php(2345): CodeIgniter\Database\BaseConnection->query('INSERT INTO `mensajes` (`remitente_id`, `destinatario_id`, `asunto`, `cuerpo`, `tipo`, `leido`) VALUES (:remitente_id:, :destinatario_id:, :asunto:, :cuerpo:, :tipo:, :leido:)', [...], false)
 5 SYSTEMPATH/Model.php(394): CodeIgniter\Database\BaseBuilder->insert()
 6 SYSTEMPATH/BaseModel.php(838): CodeIgniter\Model->doInsert([...])
 7 SYSTEMPATH/Model.php(797): CodeIgniter\BaseModel->insert([...], true)
 8 APPPATH/Controllers/Api/Mensajes.php(63): CodeIgniter\Model->insert([...])
 9 SYSTEMPATH/CodeIgniter.php(933): App\Controllers\Api\Mensajes->create()
10 SYSTEMPATH/CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\Api\Mensajes))
11 SYSTEMPATH/CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
12 SYSTEMPATH/Boot.php(363): CodeIgniter\CodeIgniter->run()
13 SYSTEMPATH/Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
14 FCPATH/index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
